# üö® GU√çA URGENTE: CORREGIR ACCESO A STORAGE

## üîç **PROBLEMA IDENTIFICADO:**
La imagen `onemillion.jpg` **NO se puede cargar** desde Supabase Storage aunque la URL se genera correctamente.

## üéØ **CAUSA RA√çZ:**
**Supabase Storage no est√° configurado** para permitir acceso p√∫blico a las im√°genes.

## üîß **SOLUCI√ìN PASO A PASO:**

### **PASO 1: Ir al Dashboard de Supabase**
1. Abre [supabase.com](https://supabase.com)
2. Inicia sesi√≥n en tu cuenta
3. Selecciona tu proyecto `Dashboard-Tuwebai`

### **PASO 2: Ir a SQL Editor**
1. En el men√∫ lateral izquierdo, haz clic en **"SQL Editor"**
2. Haz clic en **"New query"**

### **PASO 3: Ejecutar Script de Diagn√≥stico**
1. Copia y pega el contenido de `fix_storage_access_final.sql`
2. Haz clic en **"Run"**
3. **IMPORTANTE:** Si hay errores de permisos, contin√∫a con el PASO 4

### **PASO 4: Configurar Storage Manualmente (Si SQL falla)**

#### **4.1 Ir a Storage**
1. En el men√∫ lateral, haz clic en **"Storage"**
2. Selecciona el bucket **"project-files"**

#### **4.2 Configurar Bucket**
1. Haz clic en **"Settings"** (engranaje)
2. **ACTIVA** la opci√≥n **"Public bucket"**
3. Haz clic en **"Save"**

#### **4.3 Configurar Pol√≠ticas RLS**
1. Ve a **"Policies"**
2. **ELIMINA** todas las pol√≠ticas existentes
3. Haz clic en **"New Policy"**
4. Configura:
   - **Policy Name:** `Public Access`
   - **Allowed operation:** `SELECT`
   - **Target roles:** `public`
   - **Using expression:** `bucket_id = 'project-files'`
5. Haz clic en **"Save"**

### **PASO 5: Verificar Configuraci√≥n**
1. Ve a **"Storage"** ‚Üí **"project-files"**
2. Haz clic en cualquier imagen
3. Verifica que se muestre la vista previa
4. Copia la URL y p√©gala en una nueva pesta√±a del navegador

### **PASO 6: Reiniciar Aplicaci√≥n**
1. Det√©n tu servidor de desarrollo
2. Inicia tu servidor de desarrollo nuevamente
3. Ve a la p√°gina de archivos
4. Haz clic en `onemillion.jpg`

## ‚úÖ **RESULTADO ESPERADO:**
- ‚úÖ **NO m√°s warnings** de accesibilidad
- ‚úÖ **Imagen se carga** correctamente
- ‚úÖ **Vista previa funciona** en el modal
- ‚úÖ **URL directa funciona** en nueva pesta√±a

## üö® **SI SIGUE FALLANDO:**

### **Verificar Variables de Entorno:**
```bash
# En tu .env.local
VITE_SUPABASE_URL=https://xebnhwjzchrsbhzbtlsg.supabase.co
VITE_SUPABASE_ANON_KEY=tu_clave_anonima
```

### **Verificar Bucket en Supabase:**
- El bucket debe estar marcado como **"Public"**
- Las pol√≠ticas RLS deben permitir **SELECT** para **public**
- El archivo debe existir en `storage.objects`

## üìû **SOPORTE:**
Si despu√©s de seguir estos pasos sigue fallando:
1. Ejecuta el script SQL completo
2. Comparte los resultados de las consultas
3. Verifica que no haya errores de permisos

---

**‚ö†Ô∏è IMPORTANTE:** Este es un problema de **configuraci√≥n de Supabase**, NO de c√≥digo. El c√≥digo est√° funcionando perfectamente.
